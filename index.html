<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>üßÆ MATEMATIKA - Maze of Fractions (Materi + Game)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    body { font-family: 'Poppins', sans-serif; }

    /* Maze grid */
    #mazeGrid {
      display: grid;
      grid-template-columns: repeat(10, 40px);
      grid-template-rows: repeat(10, 40px);
      gap: 2px;
    }
    .maze-cell { width:40px; height:40px; display:flex; align-items:center; justify-content:center; font-size:18px; border-radius:6px; }
    .maze-wall { background:#1f2937; color:#fff; }
    .maze-path { background:#f3f4f6; }
    .maze-start { background:#10b981; color:white; }
    .maze-end { background:#ef4444; color:white; }
    .maze-question { background:#3b82f6; color:white; }
    .maze-player { background:#f59e0b; color:white; }
    .maze-correct { background:#bbf7d0; color:#064e3b; }
    .maze-incorrect { background:#fecaca; color:#7f1d1d; }

    /* Confetti */
    .confetti { position:fixed; top:-20px; width:10px; height:10px; border-radius:50%; animation:fall 3s linear forwards; z-index:9999; }
    @keyframes fall { to { transform: translateY(100vh) rotate(720deg); opacity:0; } }

    /* Modal */
    .modal { background: rgba(0,0,0,0.5); }

    /* Sound indicator button */
    #musicToggle {
      position: fixed;
      top: 14px;
      right: 14px;
      z-index: 1100;
      background: rgba(255,255,255,0.95);
      border-radius: 999px;
      padding: 6px 10px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.12);
      display:flex;
      align-items:center;
      gap:8px;
      cursor:pointer;
    }

    /* Fraction display */
    .fraction { display:inline-block; text-align:center; vertical-align:middle; font-weight:600; }
    .fraction .line { border-top:1px solid #000; display:block; margin:2px 0; }

    /* small helper */
    .hidden { display:none; }

    @keyframes shake {
      0% { transform: translateX(0); } 25% { transform: translateX(-6px); } 50% { transform: translateX(6px); } 75% { transform: translateX(-6px); } 100% { transform: translateX(0); }
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-100 to-purple-100 min-h-screen">

  <!-- AUDIO (hosted online, ceria & tenang) -->
  <audio id="bgMusic" loop>
    <source src="https://www.bensound.com/bensound-music/bensound-littleidea.mp3" type="audio/mpeg">
    Your browser does not support the audio element.
  </audio>

  <!-- MUSIC TOGGLE (top-right) -->
  <div id="musicToggle" title="Toggle Musik">
    <button id="musicBtn" class="flex items-center gap-2 px-3 py-1 rounded-full bg-purple-600 text-white">
      üéµ <span id="musicLabel">MUSIC ON</span>
    </button>
  </div>

  <!-- HOME -->
  <div id="homePage" class="container mx-auto px-4 py-8">
    <div class="text-center mb-6">
      <h1 class="text-4xl font-bold text-blue-800 mb-2">üßÆ MATEMATIKA - OPERASI HITUNG PECAHAN KELAS 6</h1>
      <h2 class="text-2xl font-semibold text-purple-700 mb-1">Game Edukatif ‚ÄúMaze of Fractions‚Äù Berbasis Geogebra</h2>
      <p class="text-gray-600 text-sm">Oleh: Ayu Novita Sari ‚Äî SD Negeri 1 Kaliejo Lawang</p>
    </div>

    <div class="flex justify-center">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-3xl">
        <div onclick="showMaterialPage()" class="bg-white rounded-xl shadow-lg p-8 text-center cursor-pointer hover:shadow-xl transition transform hover:scale-105">
          <div class="text-6xl mb-4">üìö</div>
          <h3 class="text-2xl font-bold text-blue-700 mb-2">MATERI PECAHAN</h3>
          <p class="text-gray-600">Pelajari operasi hitung pecahan dengan penjelasan lengkap dan contoh visual.</p>
        </div>
        <div onclick="showNameInput()" class="bg-white rounded-xl shadow-lg p-8 text-center cursor-pointer hover:shadow-xl transition transform hover:scale-105">
          <div class="text-6xl mb-4">üéÆ</div>
          <h3 class="text-2xl font-bold text-purple-700 mb-2">GAME MAZE OF FRACTIONS</h3>
          <p class="text-gray-600">Mainkan game labirin matematika dan uji pemahaman pecahanmu!</p>
        </div>
      </div>
    </div>
  </div>

  <!-- NAME INPUT -->
  <div id="nameInputPage" class="hidden container mx-auto px-4 py-8">
    <div class="max-w-md mx-auto bg-white rounded-xl shadow-lg p-8">
      <h2 class="text-3xl font-bold text-purple-700 mb-4">üéÆ GAME MAZE OF FRACTIONS</h2>
      <p class="text-gray-600 mb-4">Masukkan nama kamu untuk memulai petualangan!</p>
      <input id="playerName" type="text" placeholder="Nama kamu..." class="w-full px-4 py-3 border-2 border-purple-300 rounded-lg text-center text-lg mb-4 focus:outline-none focus:border-purple-500" />
      <div class="space-y-3">
        <button onclick="startGame()" class="w-full bg-purple-600 text-white py-3 rounded-lg text-lg font-semibold hover:bg-purple-700 transition">Mulai Game</button>
        <button onclick="showHomePage()" class="w-full bg-gray-500 text-white py-3 rounded-lg text-lg font-semibold hover:bg-gray-600 transition">Kembali</button>
      </div>
    </div>
  </div>

  <!-- MATERIAL PAGE (content kept effectively the same, cleaned for validity) -->
 <div id="materialPage" class="hidden container mx-auto px-4 py-8">
        <div class="max-w-4xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-blue-700">üìö Materi Operasi Hitung Pecahan</h2>
                    <button onclick="showHomePage()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors"> ‚Üê BACK</button>
                </div>
                
                <div class="space-y-8">
                    <!-- Penjumlahan -->
                    <div class="border-l-4 border-green-500 pl-6">
                        <h3 class="text-2xl font-bold text-green-700 mb-4">‚ûï Penjumlahan Pecahan</h3>
                        <p class="text-gray-700 mb-4">Untuk menjumlahkan pecahan, jika penyebut berbeda samakan penyebutnya terlebih dahulu, lalu jumlahkan pembilangnya. Sebaliknya jika penyebut sama, bisa langsung jumlahkan pembilang.</p>
                        
                        <!-- Penjelasan Visual -->
                        <div class="bg-green-50 p-4 rounded-lg mb-4">
                            <h4 class="font-bold text-green-800 mb-3">üé® Perhatikan Gambar Pecahan berikut:</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
                                <!-- Pecahan 1/2 -->
                                <div class="text-center">
                                    <span class="fraction">1<div class="fraction line"></div>2</span>
                                    <div class="w-20 h-20 mx-auto border-2 border-green-600 rounded">
                                        <div class="w-full h-1/2 bg-green-400 rounded-t"></div>
                                        <div class="w-full h-1/2 bg-white rounded-b border-t border-green-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">1 bagian dari 2</p>
                                </div>
                                
                                <!-- Tanda Plus -->
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-green-600">+</p>
                                </div>
                                
                                <!-- Pecahan 1/4 -->
                                <div class="text-center">
                                    <span class="fraction">1<div class="fraction line"></div>4</span></p>
                                    <div class="w-20 h-20 mx-auto border-2 border-green-600 rounded grid grid-cols-2 grid-rows-2 gap-0">
                                        <div class="bg-green-400 border border-green-600"></div>
                                        <div class="bg-white border border-green-600"></div>
                                        <div class="bg-white border border-green-600"></div>
                                        <div class="bg-white border border-green-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">1 bagian dari 4</p>
                                </div>
                            </div>
                            
                            <div class="text-center my-4">
                                <class="font-semibold text-green-800">(samakan penyebut) dengan mengubah penyebut pecahan <span class="fraction">1<div class="fraction line"></div>2</span> menjadi 4 yaitu :</p>
                                <span class="fraction">1<div class="fraction line"></div>2</span> = <span class="fraction">2<div class="fraction line"></div>4</span></p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
                                <!-- Pecahan 2/4 -->
                                <div class="text-center">
                                    <span class="fraction">2<div class="fraction line"></div>4</span></p>
                                    <div class="w-20 h-20 mx-auto border-2 border-green-600 rounded grid grid-cols-2 grid-rows-2 gap-0">
                                        <div class="bg-green-400 border border-green-600"></div>
                                        <div class="bg-green-400 border border-green-600"></div>
                                        <div class="bg-white border border-green-600"></div>
                                        <div class="bg-white border border-green-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">2 bagian dari 4</p>
                                </div>
                                
                                <!-- Tanda Plus -->
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-green-600">+</p>
                                    <p class="text-2xl font-bold text-green-600">=</p>
                                </div>
                                
                                <!-- Hasil 3/4 -->
                                <div class="text-center">
                                    <span class="fraction">3<div class="fraction line"></div>4</span></p>
                                    <div class="w-20 h-20 mx-auto border-2 border-green-600 rounded grid grid-cols-2 grid-rows-2 gap-0">
                                        <div class="bg-green-500 border border-green-600"></div>
                                        <div class="bg-green-500 border border-green-600"></div>
                                        <div class="bg-green-500 border border-green-600"></div>
                                        <div class="bg-white border border-green-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">3 bagian dari 4</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg mb-4">
                            <h4 class="font-bold text-blue-800 mb-3"> üé®Penjelasan gambar di atas: </h4> <p></p> --><span class="fraction">1<div class="fraction line"></div>2</span> + <span class="fraction">1<div class="fraction line"></div>4</span></p>
                            --><span class="fraction">2<div class="fraction line"></div>4</span> + <span class="fraction">1<div class="fraction line"></div>4</span> = <span class="fraction">3<div class="fraction line"></div>4</span></p>
                        </div>
  <p>
       
        <a href="https://www.geogebra.org/m/vbaycfzx" target="_blank"> Kunjungi Simulasi Penjumlahan Pecahan secara Visual untuk penjelasan lebih detail.</a> 
        
    </p>

                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <p class="font-semibold mb-2">Latihan Soal:</p>
                            <span class="fraction">2<div class="fraction line"></div>3</span> + <span class="fraction">1<div class="fraction line"></div>6</span> = ?</p>
                            <div class="space-x-2">
                                <button onclick="checkAnswer('add', 'A')" class="bg-blue-500 text-white px-3 py-1 rounded">A. <span class="fraction">3<div class="fraction line"></div>9</span></button>
                                <button onclick="checkAnswer('add', 'B')" class="bg-blue-500 text-white px-3 py-1 rounded">B. <span class="fraction">5<div class="fraction line"></div>6</span></button>
                                <button onclick="checkAnswer('add', 'C')" class="bg-blue-500 text-white px-3 py-1 rounded">C. <span class="fraction">3<div class="fraction line"></div>6</span></button>
                            </div>
                            <div id="addResult" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- Pengurangan -->
                    <div class="border-l-4 border-red-500 pl-6">
                        <h3 class="text-2xl font-bold text-red-700 mb-4">‚ûñ Pengurangan Pecahan</h3>
                        <p class="text-gray-700 mb-4">Untuk mengurangkan pecahan, sama seperti penjumlahan jika penyebut berbeda samakan penyebutnya terlebih dahulu, lalu kurangkan pembilangnya. Jika penyebut sama, maka bisa langsung dikurangkan pembilangnya.</p>
                        
                        <!-- Penjelasan Visual -->
                        <div class="bg-red-50 p-4 rounded-lg mb-4">
                            <h4 class="font-bold text-red-800 mb-3">üé® Perhatikan gambar pecahan berikut:</h4>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
                                <!-- Pecahan 3/4 -->
                                <div class="text-center">
                                    <span class="fraction">3<div class="fraction line"></div>4</span></p>
                                    <div class="w-20 h-20 mx-auto border-2 border-red-600 rounded grid grid-cols-2 grid-rows-2 gap-0">
                                        <div class="bg-red-400 border border-red-600"></div>
                                        <div class="bg-red-400 border border-red-600"></div>
                                        <div class="bg-red-400 border border-red-600"></div>
                                        <div class="bg-white border border-red-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">3 bagian dari 4</p>
                                </div>
                                
                                <!-- Tanda Minus -->
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-red-600">-</p>
                                </div>
                                
                                <!-- Pecahan 1/2 -->
                                <div class="text-center">
                                    <span class="fraction">1<div class="fraction line"></div>2</span></p>
                                    <div class="w-20 h-20 mx-auto border-2 border-red-600 rounded">
                                        <div class="w-full h-1/2 bg-red-400 rounded-t"></div>
                                        <div class="w-full h-1/2 bg-white rounded-b border-t border-red-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">1 bagian dari 2</p>
                                </div>
                            </div>
                            
                            <div class="text-center my-4">
                                <class="font-semibold text-red-800">(samakan penyebut) dengan mengubah penyebut pecahan <span class="fraction">1<div class="fraction line"></div>2</span> menjadi 4 yaitu:</p>
                               <span class="fraction">1<div class="fraction line"></div>2</span> = <span class="fraction">2<div class="fraction line"></div>4</span>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
                                
                                <!-- Pecahan 2/4 -->
                                <div class="text-center">
                                    <span class="fraction">2<div class="fraction line"></div>4</span></p>
                                    <div class="w-20 h-20 mx-auto border-2 border-red-600 rounded grid grid-cols-2 grid-rows-2 gap-0">
                                        <div class="bg-red-500 border border-red-600"></div>
                                        <div class="bg-red-500 border border-red-600"></div>
                                        <div class="bg-white border border-red-600"></div>
                                        <div class="bg-white border border-red-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">2 bagian dari 4</p>
                                </div>
                                
                                <!-- Tanda Minus -->
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-red-600">-</p>
                                    <p class="text-sm text-red-700">(kurangi 2 bagian)</p>
                                    <p class="text-2xl font-bold text-red-600">=</p>
                                </div>
                                
                                <!-- Hasil 1/4 -->
                                <div class="text-center">
                                    <class="font-semibold mb-2"><span class="fraction">1<div class="fraction line"></div>4</span>
                                    <div class="w-20 h-20 mx-auto border-2 border-red-600 rounded grid grid-cols-2 grid-rows-2 gap-0">
                                        <div class="bg-red-500 border border-red-600"></div>
                                        <div class="bg-white border border-red-600"></div>
                                        <div class="bg-white border border-red-600"></div>
                                        <div class="bg-white border border-red-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">1 bagian dari 4</p>
                                </div>
                            </div>
                        </div>
                      
                        <div class="bg-red-50 p-4 rounded-lg mb-4">
                            <class="font-semibold">üé®Penjelasan gambar di atas:<p></p>---><span class="fraction">3<div class="fraction line"></div>4</span> - <span class="fraction">1<div class="fraction line"></div>2</span></p>
                            <p></p>---><span class="fraction">3<div class="fraction line"></div>4</span> - <span class="fraction">2<div class="fraction line"></div>4</span> = <span class="fraction">1<div class="fraction line"></div>4</span></p>
                        </div>
<p>
       
        <a href="https://www.geogebra.org/m/fa5ads3m" target="_blank"> Kunjungi Simulasi Pengurangan Pecahan secara Visual untuk penjelasan lebih detail.</a> 
        
    </p>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <p class="font-semibold mb-2">Latihan Soal:</p>
                            <p></p><class="mb-2"><span class="fraction">5<div class="fraction line"></div>6</span> - <span class="fraction">1<div class="fraction line"></div>3</span> =?</p>
                            <div class="space-x-2">
                                <button onclick="checkAnswer('sub', 'A')" class="bg-blue-500 text-white px-3 py-1 rounded">A. <span class="fraction">4<div class="fraction line"></div>3</span></button>
                                <button onclick="checkAnswer('sub', 'B')" class="bg-blue-500 text-white px-3 py-1 rounded">B. <span class="fraction">1<div class="fraction line"></div>2</span></button>
                                <button onclick="checkAnswer('sub', 'C')" class="bg-blue-500 text-white px-3 py-1 rounded">C. <span class="fraction">4<div class="fraction line"></div>6</span></button>
                            </div>
                            <div id="subResult" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- Perkalian -->
                    <div class="border-l-4 border-blue-500 pl-6">
                        <h3 class="text-2xl font-bold text-blue-700 mb-4">‚úñÔ∏è Perkalian Pecahan</h3>
                        <p class="text-gray-700 mb-4">Untuk mengalikan pecahan, kalikan pembilang dengan pembilang dan penyebut dengan penyebut.</p>
                        
                        <!-- Penjelasan Visual -->
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <h4 class="font-bold text-blue-800 mb-3">üé® Perhatikan gambar pecahan berikut:</h4>
                            <p class="text-sm text-blue-700 mb-3">Perkalian pecahan berarti "berapa bagian dari bagian"</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center">
                                <!-- Pecahan 2/3 -->
                                <div class="text-center">
                                    <class="font-semibold mb-2"><span class="fraction">2<div class="fraction line"></div>3</span></p>
                                    <div class="w-20 h-20 mx-auto border-2 border-blue-600 rounded grid grid-cols-1 grid-rows-3 gap-0">
                                        <div class="bg-blue-400 border border-blue-600"></div>
                                        <div class="bg-blue-400 border border-blue-600"></div>
                                        <div class="bg-white border border-blue-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">2 bagian dari 3</p>
                                </div>
                                
                                <!-- Tanda Kali -->
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-blue-600">√ó</p>
                                    <p class="text-sm text-blue-700">dari</p>
                                </div>
                                
                                <!-- Pecahan 3/4 -->
                                <div class="text-center">
                                    <class="font-semibold mb-2"><span class="fraction">3<div class="fraction line"></div>4</span></p>
                                    <div class="w-20 h-20 mx-auto border-2 border-blue-600 rounded grid grid-cols-4 grid-rows-1 gap-0">
                                        <div class="bg-blue-400 border border-blue-600"></div>
                                        <div class="bg-blue-400 border border-blue-600"></div>
                                        <div class="bg-blue-400 border border-blue-600"></div>
                                        <div class="bg-white border border-blue-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">3 bagian dari 4</p>
                                </div>
                            </div>
                            
                            <div class="text-center my-4">
                                <class="font-semibold text-blue-800"> Tindihkan seolah-olah gambar pecahan <span class="fraction">2<div class="fraction line"></div>3</span> berada di atas gambar pecahan <span class="fraction">3<div class="fraction line"></div>4</span>, maka akan terbagi menjadi bagian-bagian potongan kecil seperti gambar berikut:</p>
                                <div class="w-32 h-32 mx-auto border-2 border-blue-600 rounded grid grid-cols-4 grid-rows-3 gap-0 mt-2">
                                    <!-- Baris 1 -->
                                    <div class="bg-blue-500 border border-blue-600"></div>
                                    <div class="bg-blue-500 border border-blue-600"></div>
                                    <div class="bg-blue-500 border border-blue-600"></div>
                                    <div class="bg-white border border-blue-600"></div>
                                    <!-- Baris 2 -->
                                    <div class="bg-blue-500 border border-blue-600"></div>
                                    <div class="bg-blue-500 border border-blue-600"></div>
                                    <div class="bg-blue-500 border border-blue-600"></div>
                                    <div class="bg-white border border-blue-600"></div>
                                    <!-- Baris 3 -->
                                    <div class="bg-white border border-blue-600"></div>
                                    <div class="bg-white border border-blue-600"></div>
                                    <div class="bg-white border border-blue-600"></div>
                                    <div class="bg-white border border-blue-600"></div>
                                </div>
                                <class="text-sm mt-2">6 bagian berwarna dari 12 bagian total = <span class="fraction">6<div class="fraction line"></div>12</span> = <span class="fraction">1<div class="fraction line"></div>2</span></p>
                            </div>
                        </div>
                        
                        <div class="bg-blue-50 p-4 rounded-lg mb-4">
                            <p class="font-semibold">üé® Penjelasan gambar di atas:<p></p>---> <span class="fraction">2<div class="fraction line"></div>3</span> √ó <span class="fraction">3<div class="fraction line"></div>4</span></p>
                            ---><span class="fraction">2√ó3<div class="fraction line"></div>3√ó4</span> = <span class="fraction">6<div class="fraction line"></div>12</span> = <span class="fraction">1<div class="fraction line"></div>2</span></p>
                        </div>
  <p> 
        <a href="https://www.geogebra.org/m/ramyeb9m" target="_blank">Kunjungi Simulasi Perkalian Pecahan secara Visual untuk penjelasan lebih detail.</a> 
       </p>
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <p class="font-semibold mb-2">Latihan Soal:</p>
                            <class="mb-2"><span class="fraction">1<div class="fraction line"></div>2</span> √ó <span class="fraction">2<div class="fraction line"></div>5</span> = ?</p>
                            <div class="space-x-2">
                                <button onclick="checkAnswer('mul', 'A')" class="bg-blue-500 text-white px-3 py-1 rounded">A. <span class="fraction">1<div class="fraction line"></div>5</span></button>
                                <button onclick="checkAnswer('mul', 'B')" class="bg-blue-500 text-white px-3 py-1 rounded">B. <span class="fraction">2<div class="fraction line"></div>10</span></button>
                                <button onclick="checkAnswer('mul', 'C')" class="bg-blue-500 text-white px-3 py-1 rounded">C. <span class="fraction">3<div class="fraction line"></div>7</span></button>
                            </div>
                            <div id="mulResult" class="mt-2"></div>
                        </div>
                    </div>

                    <!-- Pembagian -->
                    <div class="border-l-4 border-purple-500 pl-6">
                        <h3 class="text-2xl font-bold text-purple-700 mb-4">‚ûó Pembagian Pecahan</h3>
                        <p class="text-gray-700 mb-4">Untuk membagi pecahan, kalikan dengan kebalikan pecahan pembagi.</p>
                        
                        <!-- Penjelasan Visual -->
                        <div class="bg-purple-50 p-4 rounded-lg mb-4">
                            <h4 class="font-bold text-purple-800 mb-3">üé® Penjelasan gambar pecahan berikut:</h4>
                            <p class="text-sm text-purple-700 mb-3">Pembagian pecahan berarti "berapa kali pecahan pembagi masuk ke dalam pecahan yang dibagi"</p>
                            
                            <div class="text-center mb-4">
                                <p class="font-semibold mb-2">Contoh: <p></p><span class="fraction">1<div class="fraction line"></div>2</span> √∑ <span class="fraction">1<div class="fraction line"></div>4</span></p>
                                <p class="text-sm text-purple-700">"Berapa kali 1/4 masuk ke dalam 1/2?"</p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                                <!-- Pecahan 1/2 -->
                                <div class="text-center">
                                    <p class="font-semibold mb-2">Yang dibagi:<p></p> <span class="fraction">1<div class="fraction line"></div>2</span></p>
                                    <div class="w-24 h-24 mx-auto border-2 border-purple-600 rounded grid grid-cols-2 grid-rows-2 gap-0">
                                        <div class="bg-purple-400 border border-purple-600"></div>
                                        <div class="bg-purple-400 border border-purple-600"></div>
                                        <div class="bg-white border border-purple-600"></div>
                                        <div class="bg-white border border-purple-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">2 bagian dari 4 (setengah)</p>
                                </div>
                                
                                <!-- Pecahan 1/4 -->
                                <div class="text-center">
                                    <p class="font-semibold mb-2">Pembagi:<p></p><span class="fraction">1<div class="fraction line"></div>4</span></p>
                                    <div class="w-24 h-24 mx-auto border-2 border-purple-600 rounded grid grid-cols-2 grid-rows-2 gap-0">
                                        <div class="bg-purple-300 border border-purple-600"></div>
                                        <div class="bg-white border border-purple-600"></div>
                                        <div class="bg-white border border-purple-600"></div>
                                        <div class="bg-white border border-purple-600"></div>
                                    </div>
                                    <p class="text-xs mt-1">1 bagian dari 4</p>
                                </div>
                            </div>
                            
                            <div class="text-center my-4">
                                <p class="font-semibold text-purple-800">Hitung berapa kali 1/4 masuk ke dalam 1/2:</p>
                                <div class="w-24 h-24 mx-auto border-2 border-purple-600 rounded grid grid-cols-2 grid-rows-2 gap-0 mt-2">
                                    <div class="bg-purple-500 border-2 border-yellow-400"></div>
                                    <div class="bg-purple-500 border-2 border-yellow-400"></div>
                                    <div class="bg-white border border-purple-600"></div>
                                    <div class="bg-white border border-purple-600"></div>
                                </div>
                                <p class="text-sm mt-2">1/4 masuk 2 kali ke dalam 1/2</p>
                                <p class="font-bold text-purple-700">Jadi:<p></p> <span class="fraction">1<div class="fraction line"></div>2</span> √∑ <span class="fraction">1<div class="fraction line"></div>4</span> = 2</p>
                            </div>
                            
                            <div class="bg-purple-100 p-3 rounded-lg">
                                <p class="font-semibold text-purple-800 mb-2">Cara Cepat:</p>
                                <p class="text-sm">Balik pecahan pembagi, lalu kalikan:</p>
                                <p></p><span class="fraction">1<div class="fraction line"></div>2</span> √∑ <span class="fraction">1<div class="fraction line"></div>4</span> = <span class="fraction">1<div class="fraction line"></div>2</span> √ó <span class="fraction">4<div class="fraction line"></div>1</span> = <span class="fraction">4<div class="fraction line"></div>2</span> = 2</p>
                            </div>
                        </div>
                        <p> 
        <a href="https://www.geogebra.org/m/pagc42te" target="_blank">Kunjungi Simulasi Pembagian Pecahan secara Visual untuk penjelasan lebih detail.</a> 
       </p>
                       
                        <div class="bg-yellow-50 p-4 rounded-lg">
                            <p class="font-semibold mb-2">Latihan Soal:</p>
                             <class="mb-2"><span class="fraction">3<div class="fraction line"></div>4</span> √∑ <span class="fraction">1<div class="fraction line"></div>2</span> = ?</p>
                            <div class="space-x-2">
                                <button onclick="checkAnswer('div', 'A')" class="bg-blue-500 text-white px-3 py-1 rounded">A. <span class="fraction">3<div class="fraction line"></div>8</span></button>
                                <button onclick="checkAnswer('div', 'B')" class="bg-blue-500 text-white px-3 py-1 rounded">B. <span class="fraction">3<div class="fraction line"></div>2</span></button>
                                <button onclick="checkAnswer('div', 'C')" class="bg-blue-500 text-white px-3 py-1 rounded">C. <span class="fraction">6<div class="fraction line"></div>4</span></button>
                            </div>
                            <div id="divResult" class="mt-2"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

  <!-- GAME PAGE -->
  <div id="gamePage" class="hidden container mx-auto px-4 py-8">
    <div class="bg-white rounded-xl shadow-lg p-6">
      <div class="flex justify-between items-center mb-6">
        <div>
          <h2 class="text-2xl font-bold text-purple-700">üéÆ Maze of Fractions</h2>
          <p class="text-gray-600">Pemain: <span id="currentPlayer" class="font-semibold"></span></p>
        </div>
        <div class="flex items-center gap-3">
          <button id="musicBtnInGame" class="hidden bg-gray-800 text-white px-3 py-1 rounded-full">üéµ <span id="musicLabelInGame">ON</span></button>
          <button onclick="endGameBackToMenu()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">‚Üê BACK</button>
        </div>
      </div>

      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <!-- Info Panel -->
        <div class="lg:col-span-1 space-y-4">
          <div class="bg-gradient-to-br from-purple-100 to-blue-100 p-4 rounded-lg">
            <h3 class="font-bold text-lg mb-2">üìä Status Game</h3>
            <p>Level: <span id="currentLevel" class="font-bold text-purple-600">1</span></p>
            <p>Skor: <span id="currentScore" class="font-bold text-green-600">0</span></p>
            <p>Soal: <span id="questionCount" class="font-bold text-blue-600">0</span>/10</p>
          </div>

          <div class="bg-yellow-50 p-4 rounded-lg">
            <h3 class="font-bold text-lg mb-2">üìã Aturan Game</h3>
            <ul class="text-sm space-y-1">
              <li>‚Ä¢ Jawaban benar bernilai: +10 poin</li>
              <li>‚Ä¢ Jawaban salah bernilai: -5 poin</li>
              <li>‚Ä¢ Skor Level 1 >= 75, maka bisa lanjut ke Level 2</li>
 	      <li>‚Ä¢ Jawab seluruh soal untuk melanjutkan sampai menuju bendera üèÅ</li>

            </ul>
          </div>

          <div class="bg-blue-50 p-4 rounded-lg">
            <h3 class="font-bold text-lg mb-2">üéÆ Kontrol</h3>
            <div class="grid grid-cols-3 gap-2 max-w-32 mx-auto mb-2">
              <div></div>
              <button onclick="movePlayer('up')" class="bg-blue-500 text-white p-2 rounded text-sm">‚Üë</button>
              <div></div>
              <button onclick="movePlayer('left')" class="bg-blue-500 text-white p-2 rounded text-sm">‚Üê</button>
              <div class="bg-gray-300 p-2 rounded text-center text-sm">üë§</div>
              <button onclick="movePlayer('right')" class="bg-blue-500 text-white p-2 rounded text-sm">‚Üí</button>
              <div></div>
              <button onclick="movePlayer('down')" class="bg-blue-500 text-white p-2 rounded text-sm">‚Üì</button>
              <div></div>
            </div>
            <p class="text-xs text-center text-gray-600">Gunakan tombol atau keyboard (WASD / Arrow)</p>
          </div>
        </div>

        <!-- Maze Grid -->
        <div class="lg:col-span-2 flex justify-center">
          <div id="mazeGrid" class="p-4 bg-gray-100 rounded-lg"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- QUESTION MODAL -->
  <div id="questionModal" class="hidden fixed inset-0 modal items-center justify-center z-50 flex">
    <div class="bg-white rounded-xl p-6 max-w-md w-full mx-4">
      <h3 class="text-xl font-bold text-center mb-4">üìù Soal Pecahan</h3>
      <div id="questionText" class="text-center text-lg mb-6"></div>
      <div id="answerOptions" class="space-y-2"></div>
      <div id="questionResult" class="mt-4 text-center"></div>
    </div>
  </div>

  <!-- FINAL MODAL -->
  <div id="finalModal" class="hidden fixed inset-0 modal items-center justify-center z-50 flex">
    <div class="bg-white rounded-xl p-6 max-w-md w-full text-center">
      <h3 class="text-2xl font-bold mb-4">üéâ Hasil Akhir</h3>
      <div id="finalMessage"></div>
      <div class="mt-4 space-x-2">
        <button onclick="showHomePage()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700">Kembali ke Menu</button>
        <button onclick="restartSameLevel()" class="bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700">Coba Lagi</button>
      </div>
    </div>
  </div>

  <!-- SCRIPT (materi check + game logic + music toggle) -->
  <script>
    /* NAVIGATION */
    function showHomePage(){ hideAll(); document.getElementById('homePage').classList.remove('hidden'); stopBackgroundMusic(); }
    function showMaterialPage(){ hideAll(); document.getElementById('materialPage').classList.remove('hidden'); stopBackgroundMusic(); }
    function showNameInput(){ hideAll(); document.getElementById('nameInputPage').classList.remove('hidden'); stopBackgroundMusic(); }
    function showGamePage(){ hideAll(); document.getElementById('gamePage').classList.remove('hidden'); document.getElementById('musicBtnInGame').classList.remove('hidden'); document.getElementById('musicToggle').style.display = 'flex'; }
    function hideAll(){ ['homePage','materialPage','nameInputPage','gamePage','questionModal','finalModal'].forEach(id=>document.getElementById(id).classList.add('hidden')); }

    /* MATERI: cek jawaban latihan */
    function checkAnswer(operation, answer){
      const resultDiv = document.getElementById(operation + 'Result');
      let correct=false, explanation='';
      switch(operation){
        case 'add':
          if(answer==='B'){ correct=true; explanation='‚úÖ Benar! 2/3 + 1/6 = 4/6 + 1/6 = 5/6'; } else explanation='‚ùå Salah. Jawaban benar: 5/6.';
          break;
        case 'sub':
          if(answer==='B'){ correct=true; explanation='‚úÖ Benar! 5/6 - 1/3 = 1/2'; } else explanation='‚ùå Salah. Jawaban benar: 1/2.';
          break;
        case 'mul':
          if(answer==='A'){ correct=true; explanation='‚úÖ Benar! 1/2 √ó 2/5 = 1/5'; } else explanation='‚ùå Salah. Jawaban benar: 1/5.';
          break;
        case 'div':
          if(answer==='B'){ correct=true; explanation='‚úÖ Benar! 3/4 √∑ 1/2 = 3/2'; } else explanation='‚ùå Salah. Jawaban benar: 3/2.'; 
          break;
      }
      resultDiv.innerHTML = `<div class="p-3 rounded-lg ${correct ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${explanation}</div>`;
    }

    /* GAME STATE */
    let currentPlayer=''; let currentLevel=1; let currentScore=0; let questionCount=0; let currentQuestionIndex=0;
    let maze=[]; let playerRow=0, playerCol=0; let answeredQuestions=new Set();
    let currentQuestions=[];

    /* MUSIC */
    const bgMusic = document.getElementById('bgMusic');
    let musicOn = true;
    const musicBtn = document.getElementById('musicBtn');
    const musicLabel = document.getElementById('musicLabel');
    const musicBtnInGame = document.getElementById('musicBtnInGame');
    const musicLabelInGame = document.getElementById('musicLabelInGame');

    function updateMusicUI(){
      if(musicOn){ musicLabel.textContent='MUSIC ON'; musicBtn.innerHTML = 'üéµ <span id="musicLabel">MUSIC ON</span>'; musicBtnInGame.innerText = 'üéµ ON'; musicLabelInGame.innerText='ON'; }
      else { musicLabel.textContent='MUSIC OFF'; musicBtn.innerHTML = 'üîá <span id="musicLabel">MUSIC OFF</span>'; musicBtnInGame.innerText = 'üîá OFF'; musicLabelInGame.innerText='OFF'; }
    }
    musicBtn.addEventListener('click', ()=>{ musicOn = !musicOn; if(musicOn) bgMusic.play().catch(()=>{}); else bgMusic.pause(); updateMusicUI(); });
    musicBtnInGame.addEventListener('click', ()=>{ musicOn = !musicOn; if(musicOn) bgMusic.play().catch(()=>{}); else bgMusic.pause(); updateMusicUI(); });

    function startBackgroundMusic(){ if(musicOn) bgMusic.play().catch(()=>{}); updateMusicUI(); }
    function stopBackgroundMusic(){ bgMusic.pause(); bgMusic.currentTime = 0; updateMusicUI(); }

    /* QUESTIONS (Level 1 & 2) */
    const gameQuestionsLevel1 = [
      {q:"1/2 + 1/4", opt:["3/4","2/6","1/3"], c:0},
      {q:"3/4 - 1/2 = ?", opt:["1/4","2/4","1/2"], c:0},
      {q:"2/3 √ó 1/2 = ?", opt:["1/3","2/6","3/4"], c:0},
      {q:"1/2 √∑ 1/4 = ?", opt:["2","1/8","1/4"], c:0},
      {q:"1/3 + 2/6 = ?", opt:["2/3","3/9","1/2"], c:0},
      {q:"5/6 - 1/3 = ?", opt:["1/2","4/3","2/3"], c:0},
      {q:"3/5 √ó 2/3 = ?", opt:["2/5","6/15","5/8"], c:0},
      {q:"3/4 √∑ 3/8 = ?", opt:["2","9/32","1/2"], c:0},
      {q:"2/5 + 1/10 = ?", opt:["1/2","3/15","3/10"], c:2},
      {q:"7/8 - 1/4 = ?", opt:["5/8","6/4","3/4"], c:0}
    ];

    const gameQuestionsLevel2 = [
      {q:"5/6 + 7/12 = ?", opt:["3/2","9/12","17/12"], c:2},       // 17/12
      {q:"3/4 - 2/5 = ?", opt:["7/20","1/20","1/10"], c:0},       // 7/20
      {q:"7/8 √ó 4/7 = ?", opt:["1/2","7/32","4/15"], c:0},        // 1/2
      {q:"9/10 √∑ 3/5 = ?", opt:["3/2","6/1","3/5"], c:0},         // 3/2
      {q:"1 (1/2) + 3/4 = ?", opt:["2 (1/4)","2 (1/8)","1 (5/8)"], c:0},   // 2 (1/4)
      {q:"2 (1/3) - 5/6 = ?", opt:["1 (1/2)","1 (5/6)","1 (2/3)"], c:0},   // 1 (1/2)
      {q:"4/9 √ó 3/8 = ?", opt:["1/6","12/72","1/8"], c:0},        // 1/6 (12/72) = 1/6; both A and B equivalent but choose A as simplest)
      {q:"7/12 √∑ 2/3 = ?", opt:["7/8","7/18","14/36"], c:0},      // 7/8
      {q:"Siti makan 3/4 kue, Budi 2/8 kue. Berapa sisa dari 1 kue?", opt:["1/8","1/4","0"], c:2}, // total 1 => sisa 0
      {q:"Ibu punya 2 (1/2) liter sirup, dipakai 1  (3/4) liter. Berapa sisa?", opt:["3/4","2/4","1/2"], c:0} // 3/4
    ];

    /* MAZE setup */
    function initMazeForLevel(level){
      playerRow = 0; playerCol = 0; answeredQuestions.clear();
      maze = Array(10).fill().map(()=>Array(10).fill(1));
      const mainPath = [
        [0,0],[0,1],[0,2],[0,3],[0,4],[0,5],[0,6],[0,7],
        [1,7],[2,7],[3,7],[3,6],[3,5],[3,4],[3,3],[3,2],[3,1],
        [4,1],[5,1],[6,1],[6,2],[6,3],[6,4],[6,5],[6,6],[6,7],[6,8],
        [7,8],[8,8],[9,8],[9,9]
      ];
      mainPath.forEach(([r,c])=>maze[r][c]=0);
      const qpos = [[1,6],[2,6],[4,2],[5,2],[4,6],[5,6],[7,4],[8,4],[2,8],[5,8]];
      qpos.forEach(([r,c])=>maze[r][c]=2);
      renderMaze();
    }

    function renderMaze(){
      const grid = document.getElementById('mazeGrid'); grid.innerHTML='';
      for(let r=0;r<10;r++){
        for(let c=0;c<10;c++){
          const cell = document.createElement('div'); cell.className='maze-cell';
          if(r===playerRow && c===playerCol){ cell.classList.add('maze-player'); cell.textContent='üë§'; }
          else if(r===0 && c===0){ cell.classList.add('maze-start'); cell.textContent='üöÄ'; }
          else if(r===9 && c===9){ cell.classList.add('maze-end'); cell.textContent='üèÅ'; }
          else if(maze[r][c]===1){ cell.classList.add('maze-wall'); }
          else if(maze[r][c]===2){ cell.classList.add('maze-question'); cell.textContent='üìù'; }
          else if(maze[r][c]===3){ cell.classList.add('maze-correct'); cell.textContent='‚úÖ'; }
          else if(maze[r][c]===4){ cell.classList.add('maze-incorrect'); cell.textContent='‚ùå'; }
          else { cell.classList.add('maze-path'); }
          grid.appendChild(cell);
        }
      }
    }

    /* MOVEMENT */
    function movePlayer(direction){
      let nr=playerRow, nc=playerCol;
      if(direction==='up') nr--; else if(direction==='down') nr++; else if(direction==='left') nc--; else if(direction==='right') nc++;
      if(nr<0||nr>=10||nc<0||nc>=10) return;
      if(maze[nr][nc]===1) return;
      playerRow=nr; playerCol=nc;
      if(maze[nr][nc]===2 && !answeredQuestions.has(`${nr}-${nc}`)){
        showQuestionAt(nr,nc);
      }
      if(nr===9 && nc===9) checkFinish();
      renderMaze();
    }

    document.addEventListener('keydown', function(e){
      const gpVisible = !document.getElementById('gamePage').classList.contains('hidden');
      if(!gpVisible) return;
      if(e.key==='ArrowUp' || e.key==='w' || e.key==='W'){ e.preventDefault(); movePlayer('up'); }
      if(e.key==='ArrowDown' || e.key==='s' || e.key==='S'){ e.preventDefault(); movePlayer('down'); }
      if(e.key==='ArrowLeft' || e.key==='a' || e.key==='A'){ e.preventDefault(); movePlayer('left'); }
      if(e.key==='ArrowRight' || e.key==='d' || e.key==='D'){ e.preventDefault(); movePlayer('right'); }
    });

    /* Q FLOW */
    function showQuestionAt(r,c){
      if(!currentQuestions.length) return;
      if(currentQuestionIndex >= currentQuestions.length) currentQuestionIndex = currentQuestionIndex % currentQuestions.length;
      const qobj = currentQuestions[currentQuestionIndex];
      document.getElementById('questionText').textContent = qobj.q;
      const optsDiv = document.getElementById('answerOptions'); optsDiv.innerHTML='';
      qobj.opt.forEach((opt, idx)=>{
        const b = document.createElement('button');
        b.className = 'w-full bg-blue-500 text-white py-2 px-4 rounded';
        b.textContent = opt;
        b.onclick = ()=> answerQuestion(idx, qobj.c, r, c);
        optsDiv.appendChild(b);
      });
      document.getElementById('questionResult').innerHTML = '';
      document.getElementById('questionModal').classList.remove('hidden');
    }

    function answerQuestion(selected, correct, r, c){
      answeredQuestions.add(`${r}-${c}`);
      const qobj = currentQuestions[currentQuestionIndex];
      const resDiv = document.getElementById('questionResult');
      if(selected === correct){
        currentScore += 10; maze[r][c]=3;
        resDiv.innerHTML = `<div class="p-3 rounded bg-green-100 text-green-800 font-semibold">üéâ BENAR! +10</div>`;
        createConfetti(); playFeedback('correct');
      } else {
        currentScore -= 5; maze[r][c]=4;
        resDiv.innerHTML = `<div class="p-3 rounded bg-red-100 text-red-800 font-semibold">‚ùå SALAH! -5<br>Jawaban benar: ${qobj.opt[correct]}</div>`;
        const modal = document.querySelector('#questionModal > div'); modal.style.animation = 'shake 0.5s';
        setTimeout(()=> modal.style.animation = 'none', 600);
        playFeedback('wrong');
      }
      questionCount++; currentQuestionIndex++;
      updateStatus();
      setTimeout(()=>{ document.getElementById('questionModal').classList.add('hidden'); renderMaze(); }, 1400);
    }

    function updateStatus(){
      document.getElementById('currentLevel').textContent = currentLevel;
      document.getElementById('currentScore').textContent = currentScore;
      document.getElementById('questionCount').textContent = questionCount;
    }

    function checkFinish(){
      if(questionCount < 10){ alert(`Kamu harus menjawab semua soal dulu! Soal dijawab: ${questionCount}/10`); return; }
      if(currentLevel === 1){
        if(currentScore >= 75){
          alert('üéâ Selamat! Kamu naik ke Level 2!');
          currentLevel = 2; prepareLevel2();
        } else {
          showFinalModal(false);
        }
      } else {
        showFinalModal(true);
      }
    }

    function showFinalModal(cleared){
      let msg = `<p class="text-lg mb-2">Level: ${currentLevel}</p><p>Skor Akhir: <strong>${currentScore}</strong></p>`;
      if(cleared){
        if(currentScore >= 150) msg += `<p class="text-green-600 font-bold mt-2">üèÜ Luar Biasa!</p>`;
        else if(currentScore >= 100) msg += `<p class="text-blue-600 font-bold mt-2">üëè Bagus Sekali!</p>`;
        else msg += `<p class="text-orange-600 font-bold mt-2">üí™ Terus Berlatih!</p>`;
      } else {
        msg = `<p class="text-lg mb-2">Skor belum mencukupi untuk Level 2</p><p>Skor: ${currentScore}/75</p><p class="text-blue-600 mt-2">Coba lagi untuk mencapai Level 2!</p>`;
      }
      document.getElementById('finalMessage').innerHTML = msg;
      document.getElementById('finalModal').classList.remove('hidden');
    }

    function restartSameLevel(){
      document.getElementById('finalModal').classList.add('hidden');
      if(currentLevel === 1){
        currentScore = 0; questionCount = 0; currentQuestionIndex = 0;
        currentQuestions = [...gameQuestionsLevel1]; initMazeForLevel(1);
      } else {
        currentScore = 0; questionCount = 0; currentQuestionIndex = 0;
        currentQuestions = [...gameQuestionsLevel2]; initMazeForLevel(2);
      }
      updateStatus(); showGamePage(); startBackgroundMusic();
    }

    function endGameBackToMenu(){
      stopBackgroundMusic();
      currentLevel = 1; currentScore = 0; questionCount = 0; currentQuestionIndex=0;
      showHomePage();
    }

    /* LEVEL PREP */
    function startGame(){
      const name = document.getElementById('playerName').value.trim();
      if(!name){ alert('Silakan masukkan nama terlebih dahulu!'); return; }
      currentPlayer = name; currentLevel = 1; currentScore = 0; questionCount = 0; currentQuestionIndex = 0;
      document.getElementById('currentPlayer').textContent = currentPlayer;
      currentQuestions = [...gameQuestionsLevel1];
      showGamePage(); initMazeForLevel(1); updateStatus(); startBackgroundMusic();
      document.getElementById('musicBtnInGame').classList.remove('hidden');
      updateMusicLabelsUI();
    }

    function prepareLevel2(){
      currentQuestions = [...gameQuestionsLevel2];
      questionCount = 0; currentQuestionIndex = 0; initMazeForLevel(2); updateStatus();
    }

    /* FEEDBACK */
    function createConfetti(){
      const colors = ['#ff6b6b','#4ecdc4','#ffd166','#98d8c8','#a78bfa'];
      for(let i=0;i<24;i++){
        setTimeout(()=>{ const c=document.createElement('div'); c.className='confetti'; c.style.left = Math.random()*100 + 'vw'; c.style.background = colors[Math.floor(Math.random()*colors.length)]; document.body.appendChild(c); setTimeout(()=>c.remove(),3100); }, i*40);
      }
    }
    function playFeedback(type){ if(navigator.vibrate){ if(type==='correct') navigator.vibrate([80,30,80]); else navigator.vibrate([200,60,200]); } }

    /* utility */
    function updateMusicLabelsUI(){ if(musicOn){ musicBtn.innerHTML = 'üéµ <span id="musicLabel">MUSIC ON</span>'; musicBtnInGame.innerHTML='üéµ ON'; } else { musicBtn.innerHTML = 'üîá <span id="musicLabel">MUSIC OFF</span>'; musicBtnInGame.innerHTML='üîá OFF'; } }

    /* init UI */
    hideAll(); document.getElementById('homePage').classList.remove('hidden'); updateMusicLabelsUI();

    /* small helpers to show/hide toggle */
    function updateMusicLabels(){ updateMusicLabelsUI(); }

    // ensure top-right music toggle toggles music as well
    document.getElementById('musicToggle').addEventListener('click', ()=>{
      musicOn = !musicOn;
      if(musicOn) bgMusic.play().catch(()=>{}); else bgMusic.pause();
      updateMusicLabelsUI();
    });

  </script>
</body>
</html>
